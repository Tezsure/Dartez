parameter (or (unit %default) (unit %distribute)); storage (pair (address %admin) (map %owners address nat)); code { CAST (pair (or unit unit) (pair address (map address nat))) ; UNPAIR ; IF_LEFT { DROP ; NIL operation } { BALANCE ; NIL operation ; DUP 4 ; CDR ; ITER { DUP ; DUG 2 ; CAR ; CONTRACT unit ; IF_NONE { PUSH int 39 ; FAILWITH } {} ; PUSH nat 1000 ; DUP 5 ; DIG 4 ; CDR ; MUL ; EDIV ; IF_NONE { PUSH int 38 ; FAILWITH } {} ; CAR ; UNIT ; TRANSFER_TOKENS ; CONS } ; SWAP ; DROP ; SWAP ; DROP } ; NIL operation ; SWAP ; ITER { CONS } ; PAIR }