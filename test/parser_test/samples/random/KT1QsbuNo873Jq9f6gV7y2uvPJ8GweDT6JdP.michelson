parameter (or (unit %default) (pair %xtzToToken address (pair nat timestamp))); storage int; code { CAR ; IF_LEFT { DROP ; PUSH string "sorre, matte" ; FAILWITH } { PUSH int 0 ; SWAP ; DUP ; DUG 2 ; CDR ; CDR ; PAIR ; SWAP ; DUP ; DUG 2 ; CDR ; CAR ; DIG 2 ; CAR ; SWAP ; DROP ; SWAP ; CDR ; SWAP ; CONTRACT unit ; IF_NONE { PUSH string "No contract." ; FAILWITH } {} ; AMOUNT ; UNIT ; TRANSFER_TOKENS ; SWAP ; NIL operation ; DIG 2 ; CONS ; PAIR } }