parameter (key_hash %validateNewBaker); storage (pair (address %tokenContract) (set %validatedBakers key_hash)); code { UNPAIR ; SWAP ; DUP ; DUG 2 ; CAR ; SENDER ; COMPARE ; EQ ; IF {} { PUSH string "Wrong permission" ; FAILWITH } ; SWAP ; DUP ; DUG 2 ; CDR ; SWAP ; DUP ; DUG 2 ; MEM ; IF { DROP ; NIL operation } { DUP ; SOME ; SET_DELEGATE ; NIL operation ; SWAP ; CONS ; DIG 2 ; DUP ; CDR ; PUSH bool True ; DIG 4 ; UPDATE ; UPDATE 2 ; SWAP } ; PAIR }