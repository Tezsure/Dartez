parameter (or (or (unit %default) (nat %placeBid)) (bool %switchLock)); storage (pair (pair (address %admin) (address %auction)) (bool %locked)); code { UNPAIR ; IF_LEFT { IF_LEFT { DROP ; PUSH bool True ; SWAP ; DUP ; DUG 2 ; CDR ; COMPARE ; EQ ; IF { PUSH string "Something went wrong" ; FAILWITH } {} ; DUP ; CAR ; CAR ; CONTRACT unit ; IF_NONE { PUSH string "not-a-user" ; FAILWITH } {} ; AMOUNT ; UNIT ; TRANSFER_TOKENS ; SWAP ; NIL operation ; DIG 2 ; CONS ; PAIR } { SWAP ; DUP ; DUG 2 ; CAR ; CDR ; CONTRACT %bid nat ; IF_NONE { PUSH string "cant-get-auction-bid" ; FAILWITH } {} ; AMOUNT ; DIG 2 ; TRANSFER_TOKENS ; SWAP ; NIL operation ; DIG 2 ; CONS ; PAIR } } { SWAP ; CAR ; PAIR ; NIL operation ; PAIR } }